{% load static %}
<div class="bg-white p-6 rounded-lg shadow-md mt-20 max-w-7xl mx-auto">
    {% if messages %}
        {% for message in messages %}
            <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <h1 class="text-lg md:text-xl font-bold mb-4">
        Detalles de la cotización:
        <span class="text-blue-600 font-semibold">#{{ cotizaciones.id }}</span>
        - Status: <span class="text-gray-800">{{ cotizaciones.status }}</span>
        - Cliente: <span class="text-gray-800">{{ cotizaciones.cliente }}</span>
    </h1>

    {% if cotizaciones.fecha_entrega %}
        <p class="text-base md:text-lg font-semibold mb-1">📅 Fecha de entrega: {{ cotizaciones.fecha_entrega }}</p>
    {% endif %}
    {% if cotizaciones.direccion_entrega != "Pendiente" %}
        <p class="text-base md:text-lg font-semibold mb-4">📍 Dirección de entrega: {{ cotizaciones.direccion_entrega }}</p>
    {% endif %}

    <hr class="my-4">

    <!-- Tarjeta estilo ticket -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div class="bg-gray-50 rounded-xl shadow p-6 space-y-3">
            <h2 class="text-md font-semibold text-gray-700 mb-2">
                <i class="fas fa-receipt text-blue-500 mr-2"></i> Información General
            </h2>
            <p><i class="fas fa-hashtag text-gray-500 mr-2"></i>ID: <strong>{{ cotizaciones.id }}</strong></p>
            <p><i class="fas fa-calendar-day text-gray-500 mr-2"></i>Fecha: {{ cotizaciones.fecha }}</p>
            <p><i class="fas fa-calendar-check text-gray-500 mr-2"></i>Fecha Límite: {{ cotizaciones.fecha_propuesta }}</p>
            <p><i class="fas fa-dollar-sign text-gray-500 mr-2"></i>Total sin IVA: <strong>${{ cotizaciones.total }}</strong></p>
            <p><i class="fas fa-money-bill-wave text-gray-500 mr-2"></i>Anticipo: ${{ cotizaciones.anticipo }}</p>
        </div>

        <div class="bg-gray-50 rounded-xl shadow p-6 space-y-3">
            <h2 class="text-md font-semibold text-gray-700 mb-2">
                <i class="fas fa-credit-card text-green-600 mr-2"></i> Información de Pago
            </h2>
            <p><i class="fas fa-wallet text-gray-500 mr-2"></i>Método de Pago: {{ cotizaciones.metodo_pago }}</p>
            <p><i class="fas fa-shipping-fast text-gray-500 mr-2"></i>Servicio de Envío: {{ cotizaciones.servicio_envio }}</p>
            <p><i class="fas fa-truck text-gray-500 mr-2"></i>Costo Envío: ${{ cotizaciones.costo_envio }}</p>
            <p><i class="fas fa-percentage text-gray-500 mr-2"></i>IVA: ${{ cotizaciones.iva }}</p>
            <p><i class="fas fa-coins text-gray-500 mr-2"></i>Total con IVA: <strong>${{ cotizaciones.total_Civa }}</strong></p>
            <p><i class="fas fa-hand-holding-usd text-gray-500 mr-2"></i>Restante: <strong>${{ cotizaciones.restante }}</strong></p>
        </div>
    </div>

    <!-- Acciones -->
    <div class="flex flex-col md:flex-row gap-4 justify-end items-center mt-6">
        <a href="{% url 'update_quote' cotizaciones.id %}" class="w-full md:w-auto bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg shadow transition flex items-center justify-center">
            <i class="fas fa-edit mr-2"></i> Editar
        </a>
        <a href="{% url 'delete_quote' cotizaciones.id %}" class="w-full md:w-auto bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg shadow transition flex items-center justify-center">
            <i class="fas fa-trash-alt mr-2"></i> Eliminar
        </a>
    </div>

    <hr class="my-6">

    <!-- Total y PDF -->
    <div class="flex flex-col md:flex-row justify-between items-center gap-4">
        <p class="text-base md:text-lg font-semibold text-center md:text-left">
            Total con IVA: <span id="total_con_iva" class="text-green-700">${{ cotizaciones.total_Civa }}</span>
        </p>
        <a href="{% url 'generate_quote_pdf' cotizaciones.id %}"
           class="w-full md:w-auto bg-blue-600 text-white px-6 py-2 rounded-lg shadow hover:bg-blue-700 transition flex items-center justify-center gap-2">
            <i class="fas fa-file-download"></i> Descargar PDF
        </a>
    </div>
</div>
