<!-- Botón de Notificaciones -->
<div class="fixed top-4 right-4 z-50 mt-20">
    <button id="btnNotificaciones"
            class="relative bg-blue-500 text-white px-4 py-2 rounded-full shadow-lg hover:bg-blue-600 focus:outline-none">
        🔔 Notificaciones
        <span id="notificacionesCount"
                class="absolute top-0 right-0 -mt-2 -mr-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full {% if not products_alert and not upcoming_deliveries and not upcoming_events %}hidden{% endif %}">
            {{ products_alert|length|add:upcoming_deliveries|length|add:upcoming_events|length }}
        </span>
    </button>

    <!-- Contenedor de Notificaciones -->
    <div id="notificacionesContainer"
         class="hidden absolute top-full right-0 mt-3 w-80 bg-white shadow-lg rounded-lg p-4 border border-gray-300 max-h-[300px] overflow-y-auto">
        <h2 class="text-base font-semibold text-gray-800">Notificaciones</h2>
        <div class="mt-2 space-y-2 text-sm" id="notificacionesList">
            {% if products_alert %}
                {% for product in products_alert %}
                    <div class="p-3 rounded-lg notification-item {% if product.inventario == 10 %}bg-yellow-100 text-yellow-800{% else %}bg-red-100 text-red-800{% endif %}">
                        <strong>{{ product.nombre }}</strong><br>
                        {% if product.inventario == 10 %}
                            ⚠️ Solo quedan 10 unidades en inventario.
                        {% else %}
                            🚨 Urgente: Solo quedan {{ product.inventario }} unidades en inventario.
                        {% endif %}
                        <button class="mark-as-read float-right text-xs text-gray-800 hover:text-gray-700 mt-2">
                            Marcar como visto
                        </button>
                    </div>
                {% endfor %}
            {% endif %}

            <!-- Notificaciones de Fechas de Entrega Próximas -->
            {% if upcoming_deliveries %}
                <h3 class="text-sm font-semibold text-gray-800 mt-4">Fechas de Entrega Próximas</h3>
                {% for entrega in upcoming_deliveries %}
                    <div class="p-3 rounded-lg notification-item bg-blue-100 text-blue-800 h-20">
                        <strong>Entrega de Cotización #{{ entrega.id }}</strong><br>
                        📅 Fecha de entrega: {{ entrega.fecha_entrega }}<br>
                        <button class="mark-as-read float-right text-xs text-gray-800 hover:text-gray-700 mt-2">
                            Marcar como visto
                        </button>
                    </div>
                {% endfor %}
            {% endif %}

            <!-- Notificaciones de Eventos Próximos -->
            {% if upcoming_events %}
                <h3 class="text-sm font-semibold text-gray-800 mt-4">Eventos Próximos</h3>
                {% for event in upcoming_events %}
                    <div class="p-3 rounded-lg notification-item bg-green-100 text-green-800 h-20">
                        <strong>{{ event.nombre }}</strong><br>
                        📅 Fecha del evento: {{ event.fecha }}<br>
                        <button class="mark-as-read float-right text-xs text-gray-800 hover:text-gray-700 mt-2">
                            Marcar como visto
                        </button>
                    </div>
                {% endfor %}
            {% endif %}
        </div>
    </div>
</div>